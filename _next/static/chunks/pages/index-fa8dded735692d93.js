(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9731)}])},9731:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var r=t(5893),o=t(9008),i=t(7160),a=t.n(i),c=t(4051),s=t.n(c),l=t(4072),u=t.n(l),f=t(7294);function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function p(e,n,t,r,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?n(s):Promise.resolve(s).then(r,o)}function h(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){p(i,r,o,a,c,"next",e)}function c(e){p(i,r,o,a,c,"throw",e)}a(void 0)}))}}function m(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=function(e){var n=e.updateFiles,t=(0,f.useState)(!1),o=t[0],i=t[1],a=(0,f.useState)(!1),c=(a[0],a[1]),l=(0,f.useRef)(),d=function(){var e=h(s().mark((function e(t){var r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files.length){e.next=10;break}return i(!0),c(t.target.files[0]),(r=new FormData).append("file",t.target.files[0]),e.next=7,fetch("/api/file",{method:"POST",body:r}).then((function(e){return e.json()}));case 7:(o=e.sent).status&&n(t.target.files[0],o.jsonFile,o.jsonData),i(!1);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(f.Fragment,{children:(0,r.jsx)("div",{className:u().uploader,onClick:function(){return!o&&l.current.click()},children:o?(0,r.jsx)("div",{className:u().fileLoader,children:"Loading..."}):(0,r.jsxs)("span",{children:["+",(0,r.jsx)("input",{ref:l,type:"file",className:u().fileInput,accept:".csv",onChange:d})]})})})},_=function(e){var n=e.file,t=e.updateFiles,o=function(){var e=h(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/file",{method:"DELETE",body:JSON.stringify({file:n}),headers:{"Content-Type":"application/json"}});case 3:e.sent.status&&t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR WHILE DELETING",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{className:u().uploader,children:[(0,r.jsx)("span",{className:u().close,onClick:function(){return o(n.name)},children:"x"}),n.name]})},x=function(e){var n=e.files,t=e.setFiles;return(0,r.jsxs)("div",{className:u().wrapper,children:[n.map((function(e){return(0,r.jsx)(_,{file:e.file,updateFiles:function(){return t(n.filter((function(n){return n.id!==e.id})))}},e.id)})),(0,r.jsx)(v,{updateFiles:function(e,r,o){return t(m(n).concat([{id:n.length+1,file:e,location:r,data:o}]))}})]})},g=t(460),w=t(8325),j=(t(5433),t(9980),t(3162)),y=t(1064),b=t.n(y);function E(e,n,t,r,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?n(s):Promise.resolve(s).then(r,o)}var N=function(e){var n=e.files,t=void 0===n?[]:n,o="After Processing Please Return the result to check in output",i=(0,f.useState)("/*\n ".concat(o," \n*/")),a=i[0],c=i[1],l=(0,f.useState)(">"),u=l[0],d=l[1],p=(0,f.useState)(!1),h=p[0],m=p[1];(0,f.useEffect)((function(){var e=t.map((function(e,n){var t="File".concat(n+1);return window[t]=e.data," var File".concat(n+1,"; // SET FROM ").concat(e.file.name)})).join("\n");c("/*\n ".concat(o,"\n").concat(e," \n*/")),d(">")}),[t]);var v=function(){var e,n=(e=s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=7;break}return m(!0),e.next=4,fetch("/api/csv",{method:"POST",body:JSON.stringify({files:t,code:a})}).then((function(e){return e.json()})).catch((function(e){console.log("Error While Downloading",e),d("> Error While Downloading -> ".concat(e.message||e))}));case 4:(n=e.sent)&&(n.status?(0,j.saveAs)(n.result,"OUTPUT.csv"):d("> Error -> ".concat(JSON.stringify(n.err)))),m(!1);case 7:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){E(i,r,o,a,c,"next",e)}function c(e){E(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsxs)(f.Fragment,{children:[(0,r.jsxs)("div",{className:b().wrapper,children:[(0,r.jsx)(g.Z,{value:a,onValueChange:function(e){return c(e)},highlight:function(e){return(0,w.highlight)(e,w.languages.js)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,border:"1px solid black",margin:"16px",marginTop:"36px",height:"500px",overflowY:"scroll"}}),(0,r.jsx)("div",{className:b().output,children:u})]}),(0,r.jsxs)("div",{className:b().wrapper,children:[(0,r.jsx)("button",{className:b().execute,onClick:function(){try{var e=new Function(a)();"object"===typeof e&&(e=JSON.stringify(e,null,2)),d("> ".concat(e||'Error -> "Something should be returned from the code!!"'))}catch(n){console.log("Error while Code Execution!",n),d('> Error -> "'.concat(n.message||n,'"'))}},children:"Execute"}),(0,r.jsx)("button",{className:b().download,onClick:v,children:h?"Downloading...":"Download"})]})]})};function k(){var e=(0,f.useState)([]),n=e[0],t=e[1];return(0,r.jsxs)("div",{className:a().container,children:[(0,r.jsxs)(o.default,{children:[(0,r.jsx)("title",{children:"CSV Utility"}),(0,r.jsx)("meta",{name:"description",content:"Generate operations with your csvs"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("main",{className:a().main,children:[(0,r.jsxs)("h1",{className:a().title,children:["Welcome to ",(0,r.jsx)("span",{children:"CSV Utility"})]}),(0,r.jsx)("p",{className:a().description,children:"Perform any kind of actions you want to on csv files"}),(0,r.jsxs)("div",{className:a().content,children:[(0,r.jsx)(x,{files:n,setFiles:t}),(0,r.jsx)(N,{files:n})]})]}),(0,r.jsxs)("footer",{className:a().footer,children:["Built by"," ",(0,r.jsx)("span",{className:a().logo,children:(0,r.jsx)("a",{href:"https://www.linkedin.com/in/senthur-athiban-181a85b2/",target:"_blank",alt:"Author",title:"Author",rel:"noreferrer",children:"Senthur Athiban"})})]})]})}},7160:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",logo:"Home_logo__27_tb",content:"Home_content__Zy02X"}},1064:function(e){e.exports={wrapper:"codeEditor_wrapper__oeAqI",output:"codeEditor_output__lgBoH",execute:"codeEditor_execute__tbgAE",download:"codeEditor_download__cgBCl"}},4072:function(e){e.exports={wrapper:"converter_wrapper__h4Wey",uploader:"converter_uploader__zQcC9",fileInput:"converter_fileInput__4V3k_",textCenter:"converter_textCenter__A77MX",close:"converter_close__OR1GK",fileLoader:"converter_fileLoader__bzywf"}}},function(e){e.O(0,[78,774,888,179],(function(){return n=8581,e(e.s=n);var n}));var n=e.O();_N_E=n}]);